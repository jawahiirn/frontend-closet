#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run knip to check for unused code
echo "üîç Running knip to check for unused code..."
echo ""

# Change to the pokedex-web directory where package.json and knip.json are located
cd pokedex-web || exit 1

npm run knip

if [ $? -ne 0 ]; then
  echo ""
  echo "‚ö†Ô∏è  WARNING: Knip found unused code (see above)"
  echo ""
  echo "This is informational only - your push will continue."
  echo "Please review the unused code and remove it when appropriate."
  echo "To block pushes with unused code, edit .husky/pre-push"
  echo ""
fi

echo "‚úÖ Pre-push check complete"
exit 0
